/**
 * Simple JavaScript library for RGB/HSB/HEX colors based
 * on John Dyer`s ColorMethods (https://github.com/johndyer)
 *
 * @page    http://github.com/Shushik/i-color/
 * @author  Shushik <silkleopard@yandex.ru>
 * @version 1.0
 */
;(function(i){var h=function(a){this.init(a||!1);return this};h.prototype={_hex:"000000",_rgb:{r:0,g:0,b:0},_hsb:{h:0,s:0,b:0},init:function(a){switch(typeof a){case "string":this.hex(a);break;case "object":a.r||a.g?this.rgb(a):(a.h||a.s)&&a.hsb(a)}return this},validate:function(a,c){var c=c||"hex",b=0,e=h.prototype["_"+c];switch(c){case "rgb":case "hsb":for(b in e){a[b]-=0;if(!a[b]||isNaN(a[b])||0>a[b])a[b]=0;a[b]=Math.floor(a[b]);if("r"==b||"g"==b||"rgb"==c&&"b"==b)255<a[b]&&(a[b]=255);else if("h"== b||"s"==b)100<a[b]&&(a[b]=100);else if("hsb"==c&&"b"==b&&(360<=a[b]||0>a[b]))a[b]=0}break;case "hex":a=(""+a).toUpperCase().replace(/[^A-F0-9]/g,"0"),b=a.length,6>b&&3<b?a+="000000".substring(b,6-b):6>b&&3>b?a+="000".substring(b,3-b):6<b&&(a=a.substring(0,6))}return a},_hex2rgb:function(a){var a=a?a:this._hex,c={r:0,g:0,b:0};3==a.length?(c.r=parseInt(a.substring(0,1),16),c.r=parseInt(a.substring(1,1),16),c.r=parseInt(a.substring(2,1),16)):(c.r=parseInt(a.substring(0,2),16),c.r=parseInt(a.substring(2, 2),16),c.r=parseInt(a.substring(4,2),16));return c},_hex2hsb:function(a){a=h.prototype._hex2rgb(a?a:this._hex);return h.prototype._rgb2hsb(a)},_rgb2hsb:function(a){var c=a?a:this._rgb,a=c.r/255,b=c.g/255,c=c.b/255,e=0,g=0,e=0,f={h:0,s:0,b:0};a>=b&&a>=b?(g=a,e=b>c?c:b):b>=c&&b>=a?(g=b,e=a>c?c:a):(g=c,e=b>a?a:b);f.b=g;f.s=g?(g-e)/g:0;f.s?(e=g-e,f.h=a==g?(b-c)/e:b==g?2+(c-a)/e:4+(a-b)/e,f.h=parseInt(60*f.h),0>f.h&&(f.h+=360)):f.h=0;f.s=parseInt(100*f.s);f.b=parseInt(100*f.b);return f},_rgb2hex:function(a){a= a?a:this._rgb;return a.r.toString(16)+a.g.toString(16)+a.b.toString(16)},_hsb2rgb:function(a){var c=a?a:this._hsb,b=a=0,e=0,g=0,f=0,e=c.h,f=c.s,c=c.b,d={r:0,g:0,b:0};if(0==f)d.r=0==c?d.g=d.b=0:d.g=d.b=parseInt(255*c/100);else{360==e&&(e=0);e/=60;f/=100;c/=100;a=parseInt(e);b=e-a;e=c*(1-f);g=c*(1-f*b);f=c*(1-f*(1-b));switch(a){case 0:d.r=c;d.g=f;d.b=e;break;case 1:d.r=g;d.g=c;d.b=e;break;case 2:d.r=e;d.g=c;d.b=f;break;case 3:d.r=e;d.g=g;d.b=c;break;case 4:d.r=f;d.g=e;d.b=c;break;case 5:d.r=c,d.g=e, d.b=g}d.r=parseInt(255*d.r);d.g=parseInt(255*d.g);d.b=parseInt(255*d.b)}return d},_hsb2hex:function(a){rgb=h.prototype._hsb2rgb(a?a:this._hsb);return hex=h.prototype._rgb2hex(rgb)},convert:function(a,c,b){a="_"+(a||"hex")+"2"+(c||"rgb");return h.prototype[a]?h.prototype[a](b||!1):!1},rgb:function(a){a=a||!1;if("object"==typeof a)a.r=a.r||0,a.g=a.g||0,a.b=a.b||0,this._rgb=this.validate(a,"rgb"),this._hsb=this.convert("rgb","hsb"),this._hex=this.convert("rgb","hex");else return this._rgb;return this}, hsb:function(a){a=a||!1;if("object"==typeof a)a.h=a.h||0,a.s=a.s||0,a.b=a.b||0,this._hsb=this.validate(a,"hsb"),this._rgb=this.convert("hsb","rgb"),this._hex=this.convert("rgb","hex");else return this._hsb;return this},hex:function(a){var a=a||!1,c=typeof a;if("number"==c||"string"==c)this._hex=this.validate(a,"hex"),this._rgb=this.convert("hex","rgb"),this._hsb=this.convert("rgb","hsb");else return this._hex;return this}};h.convert=h.prototype.convert;h.validate=h.prototype.validate;(i||window).Color= h})(window);