/**
 * Simple JavaScript library for RGB/HSB/HEX colors based
 * on John Dyer`s ColorMethods (https://github.com/johndyer)
 *
 * @page    http://github.com/Shushik/i-color/
 * @author  Shushik <silkleopard@yandex.ru>
 * @version 1.0
 */
;(function(i){var d=function(a){this.init(a||!1);return this};d.prototype={_hex:"000000",_rgb:{r:0,g:0,b:0},_hsb:{h:0,s:0,b:0},init:function(a){switch(typeof a){case "string":this.hex(a);break;case "object":a.r||a.g?this.rgb(a):(a.h||a.s)&&a.hsb(a)}return this},validate:function(a,b){var b=b||"hex",c=0,g=d.prototype["_"+b];switch(b){case "rgb":case "hsb":for(c in g){a[c]-=0;if(!a[c]||isNaN(a[c])||0>a[c])a[c]=0;a[c]=Math.floor(a[c]);if("r"==c||"g"==c||"rgb"==b&&"b"==c)255<a[c]&&(a[c]=255);else if("h"== c||"s"==c)100<a[c]&&(a[c]=100);else if("hsb"==b&&"b"==c&&(360<=a[c]||0>a[c]))a[c]=0}break;case "hex":a=(""+a).toUpperCase().replace(/[^A-F0-9]/g,"0"),c=a.length,6>c&&3<c?a+="000000".substring(c,6-c):6>c&&3>c?a+="000".substring(c,3-c):6<c&&(a=a.substring(0,6))}return a},_hex2rgb:function(a){var a=a?a:this._hex,b={r:0,g:0,b:0};3==a.length?(b.r=parseInt(a.substring(0,1),16),b.r=parseInt(a.substring(1,1),16),b.r=parseInt(a.substring(2,1),16)):(b.r=parseInt(a.substring(0,2),16),b.r=parseInt(a.substring(2, 2),16),b.r=parseInt(a.substring(4,2),16));return b},_hex2hsb:function(a){a=d.prototype._hex2rgb(a?a:this._hex);return d.prototype._rgb2hsb(a)},_rgb2hsb:function(a){var b=a?a:this._rgb,a=b.r/255,c=b.g/255,b=b.b/255,g=0,d=0,g=0,e={h:0,s:0,b:0};a>=c&&a>=c?(d=a,g=c>b?b:c):c>=b&&c>=a?(d=c,g=a>b?b:a):(d=b,g=c>a?a:c);e.b=d;e.s=d?(d-g)/d:0;e.s?(g=d-g,e.h=a==d?(c-b)/g:c==d?2+(b-a)/g:4+(a-c)/g,e.h=parseInt(60*e.h),0>e.h&&(e.h+=360)):e.h=0;e.s=parseInt(100*e.s);e.b=parseInt(100*e.b);return e},_rgb2hex:function(a){a= a?a:this._rgb;return a.r.toString(16)+a.g.toString(16)+a.b.toString(16)},_hsb2rgb:function(a){var b=a?a:this._hsb,c=a=0,d=0,h=0,e=0,d=b.h,e=b.s,b=b.b,f={r:0,g:0,b:0};if(0==e)f.r=0==b?f.g=f.b=0:f.g=f.b=parseInt(255*b/100);else{360==d&&(d=0);d/=60;e/=100;b/=100;a=parseInt(d);c=d-a;d=b*(1-e);h=b*(1-e*c);e=b*(1-e*(1-c));switch(a){case 0:f.r=b;f.g=e;f.b=d;break;case 1:f.r=h;f.g=b;f.b=d;break;case 2:f.r=d;f.g=b;f.b=e;break;case 3:f.r=d;f.g=h;f.b=b;break;case 4:f.r=e;f.g=d;f.b=b;break;case 5:f.r=b,f.g=d, f.b=h}f.r=parseInt(255*f.r);f.g=parseInt(255*f.g);f.b=parseInt(255*f.b)}return f},_hsb2hex:function(a){rgb=d.prototype._hsb2rgb(a?a:this._hsb);return hex=d.prototype._rgb2hex(rgb)},type:function(a){if("object"==typeof a){if(!isNaN(a.r)||!isNaN(a.g))return"rgb";if(!isNaN(a.h)||!isNaN(a.s))return"hsb"}else if("number"==typeof a||"string"==typeof a)return"hex";return!1},convert:function(a,b,c){a="_"+(a||"hex")+"2"+(b||"rgb");return d.prototype[a]?d.prototype[a](c||!1):!1},invert:function(a,b){var b= b||!1,c=d.prototype.type(a),g="",h=null,e={};if(c)h="rgb"!=c?d.prototype["_"+c+"2rgb"](a):a;else return!1;for(g in h)e[g]=255-h[g];b&&(e=d.prototype["_rgb2"+b](e));return e},rgb:function(a){a=a||!1;if("object"==typeof a)a.r=a.r||0,a.g=a.g||0,a.b=a.b||0,this._rgb=this.validate(a,"rgb"),this._hsb=this.convert("rgb","hsb"),this._hex=this.convert("rgb","hex");else return this._rgb;return this},hsb:function(a){a=a||!1;if("object"==typeof a)a.h=a.h||0,a.s=a.s||0,a.b=a.b||0,this._hsb=this.validate(a,"hsb"), this._rgb=this.convert("hsb","rgb"),this._hex=this.convert("rgb","hex");else return this._hsb;return this},hex:function(a){var a=a||!1,b=typeof a;if("number"==b||"string"==b)this._hex=this.validate(a,"hex"),this._rgb=this.convert("hex","rgb"),this._hsb=this.convert("rgb","hsb");else return this._hex;return this}};d.convert=d.prototype.convert;d.invert=d.prototype.invert;d.validate=d.prototype.validate;d.type=d.prototype.type;(i||window).Color=d})(window);