/**
 * Simple JavaScript library for RGB/HSB/HEX/XYZ/LAB colors based
 * on algorithms from EasyRGB (http://www.easyrgb.com/index.php?X=MATH)
 *
 * @page    http://github.com/Shushik/i-color/
 * @author  Shushik <silkleopard@yandex.ru>
 * @version 1.0
 */
;(function(j){var i=function(){return this};i.prototype={_rgb:{r:{min:0,max:255},g:{min:0,max:255},b:{min:0,max:255}},_hsv:{h:{min:0,max:359},s:{min:0,max:100},v:{min:0,max:100}},_xyz:{x:{min:0,max:95.047},y:{min:0,max:100},z:{min:0,max:108.883}},_lab:{l:{min:0,max:100},a:{min:-128,max:127},b:{min:-128,max:127}},_cmyk:{c:{min:0,max:100},m:{min:0,max:100},y:{min:0,max:100},k:{min:0,max:100}},_white:{x:95.047,y:100,z:108.883},_human:{red:"FF0000",tan:"D2B48C",aqua:"00FFFF",blue:"0000FF",cyan:"00FFFF", gold:"FFD700",gray:"808080",lime:"00FF00",navy:"000080",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",snow:"FFFAFA",teal:"008080",azure:"F0FFFF",beige:"F5F5DC",black:"000000",brown:"A52A2A",coral:"FF7F50",green:"008000",ivory:"FFFFF0",khaki:"F0E68C",linen:"FAF0E6",olive:"808000",wheat:"F5DEB3",white:"FFFFFF",bisque:"FFE4C4",indigo:"4B0082",maroon:"800000",orange:"FFA500",orchid:"DA70D6",purple:"800080",salmon:"FA8072",sienna:"A0522D",silver:"C0C0C0",tomato:"FF6347",violet:"EE82EE",yellow:"FFFF00",crimson:"DC143C", darkred:"8B0000",dimgray:"696969",fuchsia:"FF00FF",hotpink:"FF69B4",magenta:"FF00FF",oldlace:"FDF5E6",skyblue:"87CEEB",thistle:"D8BFD8",cornsilk:"FFF8DC",darkblue:"00008B",darkcyan:"008B8B",darkgray:"A9A9A9",deeppink:"FF1493",honeydew:"F0FFF0",lavender:"E6E6FA",moccasin:"FFE4B5",seagreen:"2E8B57",seashell:"FFF5EE",aliceblue:"F0F8FF",burlywood:"DEB887",cadetblue:"5F9EA0",chocolate:"D2691E",darkgreen:"006400",darkkhaki:"BDB76B",firebrick:"B22222",gainsboro:"DCDCDC",goldenrod:"DAA520",indianred:"CD5C5C", lawngreen:"7CFC00",lightblue:"ADD8E6",lightcyan:"E0FFFF",lightgrey:"D3D3D3",lightpink:"FFB6C1",limegreen:"32CD32",mintcream:"F5FFFA",mistyrose:"FFE4E1",olivedrab:"6B8E23",orangered:"FF4500",palegreen:"98FB98",peachpuff:"FFDAD9",rosybrown:"BC8F8F",royalblue:"4169E1",slateblue:"6A5ACD",slategray:"708090",steelblue:"4682B4",turquoise:"40E0D0",aquamarine:"7FFFD4",blueviolet:"8A2BE2",chartreuse:"7FFF00",darkorange:"FF8C00",darkorchid:"9932CC",darksalmon:"E9967A",darkviolet:"9400D3",dodgerblue:"1E90FF", ghostwhite:"F8F8FF",lightcoral:"F08080",lightgreen:"90EE90",mediumblue:"0000CD",papayawhip:"FFEFD5",powderblue:"B0E0E6",sandybrown:"F4A460",whitesmoke:"F5F5F5",floralwhite:"FFFAF0",forestgreen:"228B22",darkmagenta:"8B008B",deepskyblue:"00BFFF",navajowhite:"FFDEAD",yellowgreen:"9ACD32",greenyellow:"ADFF2F",lightsalmon:"FFA07A",lightyellow:"FFFFE0",saddlebrown:"8B4513",springgreen:"00FF7F",darkseagreen:"8FBC8F",antiquewhite:"FAEBD7",lemonchiffon:"FFFACD",lightskyblue:"87CEFA",mediumorchid:"BA55D3", mediumpurple:"9370D8",midnightblue:"191970",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkturquoise:"00CED1",darkgoldenrod:"B8860B",lavenderblush:"FFF0F5",lightseagreen:"20B2AA",palegoldenrod:"EEE8AA",paleturquoise:"AFEEEE",palevioletred:"D87093",blanchedalmond:"FFEBCD",cornflowerblue:"6495ED",darkolivegreen:"556B2F",lightslategray:"778899",lightsteelblue:"B0C4DE",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumturquoise:"48D1CC",mediumvioletred:"C71585",mediumaquamarine:"66CDAA",mediumspringgreen:"00FA9A", lightgoldenrodyellow:"FAFAD2"},_round:function(a,c){a=(a+"").replace(RegExp("^([-\\d]*)(\\.\\d{1,"+(c||3)+"})?.*"),"$1$2");return a-0},_hex2rgb:function(a){var c={r:0,g:0,b:0};3==a.length?(c.r=parseInt(a.substring(0,1)+a.substring(0,1),16),c.g=parseInt(a.substring(1,2)+a.substring(1,2),16),c.b=parseInt(a.substring(2,3)+a.substring(2,3),16)):(c.r=parseInt(a.substring(0,2),16),c.g=parseInt(a.substring(2,4),16),c.b=parseInt(a.substring(4,6),16));return c},_hex2hsv:function(a){var c=i.prototype,a=c._hex2rgb(a); return c._rgb2hsv(a)},_hex2xyz:function(a){var c=i.prototype,a=c._hex2xyz(a);return c._xyz2lab(a)},_hex2xyz:function(a){var c=i.prototype,a=c._hex2rgb(a);return c._rgb2xyz(a)},_rgb2hsv:function(a){var c=a.r/255,d=a.g/255,a=a.b/255,e=0,f=0,e=0,h={h:0,s:0,v:0};c>=d&&c>=d?(f=c,e=d>a?a:d):d>=a&&d>=c?(f=d,e=c>a?a:c):(f=a,e=d>c?c:d);h.v=f;h.s=f?(f-e)/f:0;h.s?(e=f-e,h.h=c==f?(d-a)/e:d==f?2+(a-c)/e:4+(c-d)/e,h.h=parseInt(60*h.h),0>h.v&&(h.v+=360)):h.h=0;h.s=parseInt(100*h.s);h.v=parseInt(100*h.v);return h}, _rgb2lab:function(a){var c=i.prototype,a=c._rgb2xyz(a);return c._xyz2lab(a)},_rgb2xyz:function(a){var c="",a={r:a.r/255,g:a.g/255,b:a.b/255},d=null;for(c in a)a[c]=0.04045<a[c]?Math.pow((a[c]+0.055)/1.055,2.4):a[c]/12.92,a[c]*=100;d={x:0.4124*a.r+0.3576*a.g+0.1805*a.b,y:0.2126*a.r+0.7152*a.g+0.0722*a.b,z:0.0193*a.r+0.1192*a.g+0.9505*a.b};for(c in d)d[c]=i.prototype._round(d[c]);return d},_rgb2hex:function(a){var c="",d={};d.r=a.r.toString(16);d.g=a.g.toString(16);d.b=a.b.toString(16);for(c in d)2> d[c].length&&(d[c]+=d[c]);return d.r+d.g+d.b},_hsv2rgb:function(a){var c=0,d=0,e=0,f=0,h=0,e=a.h,h=a.s,a=a.v,g={r:0,g:0,b:0};if(0==h)g.r=0==b?g.g=g.b=0:g.g=g.b=parseInt(255*b/100);else{360==e&&(e=0);e/=60;h/=100;a/=100;c=parseInt(e);d=e-c;e=a*(1-h);f=a*(1-h*d);h=a*(1-h*(1-d));switch(c){case 0:g.r=a;g.g=h;g.b=e;break;case 1:g.r=f;g.g=a;g.b=e;break;case 2:g.r=e;g.g=a;g.b=h;break;case 3:g.r=e;g.g=f;g.b=a;break;case 4:g.r=h;g.g=e;g.b=a;break;case 5:g.r=a,g.g=e,g.b=f}g.r=parseInt(255*g.r);g.g=parseInt(255* g.g);g.b=parseInt(255*g.b)}return g},_hsv2lab:function(a){var c=i.prototype,a=c._hsv2xyz(a);return c._xyz2lab(a)},_hsv2xyz:function(a){var c=i.prototype,a=c._hsv2rgb(a);return c._rgb2xyz(a)},_hsv2hex:function(a){var c=i.prototype,a=c._hsv2rgb(a);return c._rgb2hex(a)},_lab2rgb:function(a){var c=i.prototype,a=c._lab2xyz(a);return c._xyz2rgb(a)},_lab2hsv:function(a){var c=i.prototype,a=c._lab2rgb(a);return c._rgb2hsv(a)},_lab2xyz:function(a){var c="",d=0,e={},f=i.prototype,h=f._white;e.y=(a.l+16)/116; e.x=a.a/500+e.y;e.z=e.y-a.b/200;for(c in e)d=Math.pow(e[c],3),e[c]=0.008856<d?d:(e[c]-16/116)/7.787,e[c]=f._round(e[c]*h[c]);return{x:e.x,y:e.y,z:e.z}},_lab2hex:function(a){var c=i.prototype,a=c._lab2rgb(a);return c._rgb2hex(a)},_xyz2rgb:function(a){var c="",d=a.x/100,e=a.y/100,a=a.z/100,f={};f.r=3.2406*d+-1.5372*e+-0.4986*a;f.g=-0.9689*d+1.8758*e+0.0415*a;f.b=0.0557*d+-0.204*e+1.057*a;for(c in f)f[c]=i.prototype._round(f[c]),f[c]=0.0031308<f[c]?1.055*Math.pow(f[c],1/2.4)-0.055:12.92*f[c],f[c]=Math.round(255* f[c]);return f},_xyz2hsv:function(a){var c=i.prototype,a=c._xyz2rgb(a);return c._rgb2hsv(a)},_xyz2lab:function(a){var c="",d={},e=i.prototype._white;for(c in a)d[c]=a[c]/e[c],d[c]=0.008856<d[c]?Math.pow(d[c],1/3):7.787*d[c]+16/116;return{l:116*d.y-16,a:500*(d.x-d.y),b:200*(d.y-d.z)}},_xyz2hex:function(a){var c=i.prototype,a=c._xyz2rgb(a);return c._rgb2hex(a)},type:function(a){var c="",d="";if("object"==typeof a){for(c in a)a[c]-=0;if(!isNaN(a.r)||!isNaN(a.g))return"rgb";if(!isNaN(a.h)||!isNaN(a.s))return"hsv"; if(!isNaN(a.x)||!isNaN(a.z))return"xyz";if(!isNaN(a.l)||!isNaN(a.a))return"lab";if(!isNaN(a.c)||!isNaN(a.m)||!isNaN(a.k))return"cmyk"}else if("number"==typeof a||"string"==typeof a)return d=a.substring(0,4),"rgb("==d||"rgba"==d?"css":"hex";return!1},validate:function(a,c){var c=c||!1,d=i.prototype,e=d.type(a),f="",h="",g=h=null;if(e){"css"==e?(g=d._rgb,e="rgb",h=a.replace(/rgb(a)?\(|\)/g,"").split(/,\s?/),a={r:h[0],g:h[1],b:h[2]}):g=d["_"+e];switch(e){case "css":case "rgb":case "hsv":case "lab":case "xyz":case "cmyk":for(f in g)!a[f]|| a[f]<g[f].min?a[f]=g[f].min:a[f]>g[f].max&&(a[f]="hsv"==e&&"h"==f?0:g[f].max);break;case "hex":(h=d._human[a.toLowerCase()])?a=h:(a=(""+a).toUpperCase().replace(/^#/g,"").replace(/[^A-F0-9]/g,"0"),f=a.length,6>f&&3<f?a+="000000".substring(f,6-f):6>f&&3>f?a+="000".substring(f,3-f):6<f&&(a=a.substring(0,6)))}return c?{type:e,raw:a}:a}return!1},convert:function(a,c){var c=c||"rgb",d="",e=i.prototype,f=e.validate(a,!0);return f&&(d="_"+f.type+"2"+c,e[d])?e[d](f.raw):!1}};i.type=i.prototype.type;i.convert= i.prototype.convert;i.validate=i.prototype.validate;(j||window).Color=i})(window);